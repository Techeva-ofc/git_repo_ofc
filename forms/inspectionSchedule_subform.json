{
    "className": "org.joget.apps.form.model.Form",
    "elements": [{
        "className": "org.joget.apps.form.model.Section",
        "elements": [{
            "className": "org.joget.apps.form.model.Column",
            "elements": [
                {
                    "className": "org.joget.apps.form.lib.HiddenField",
                    "properties": {
                        "id": "id",
                        "useDefaultWhenEmpty": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.TextField",
                    "properties": {
                        "encryption": "",
                        "id": "checkpointCode",
                        "label": "Checkpoint Code",
                        "maxlength": "",
                        "placeholder": "",
                        "readonly": "",
                        "readonlyLabel": "",
                        "size": "",
                        "storeNumeric": "",
                        "style": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.TextField",
                    "properties": {
                        "encryption": "",
                        "id": "checkpointName",
                        "label": "Checkpoint Name",
                        "maxlength": "",
                        "placeholder": "",
                        "readonly": "",
                        "readonlyLabel": "",
                        "size": "",
                        "storeNumeric": "",
                        "style": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.TextField",
                    "properties": {
                        "encryption": "",
                        "id": "type",
                        "label": "Type",
                        "maxlength": "",
                        "placeholder": "",
                        "readonly": "",
                        "readonlyLabel": "",
                        "size": "",
                        "storeNumeric": "",
                        "style": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.plugin.enterprise.ImageUpload",
                    "properties": {
                        "createThumbnail": "true",
                        "fileType": ".jpeg;.jpg;.gif;.png",
                        "fileTypeMsg": "Invalid file type",
                        "height": "60",
                        "id": "ref_image",
                        "label": "Image Upload",
                        "maxSize": "",
                        "maxSizeMsg": "File size limit exceeded",
                        "multiple": "",
                        "padding": "",
                        "permissionType": "",
                        "readonly": "",
                        "removeFile": "",
                        "resizeHeight": "",
                        "resizeMethod": "",
                        "resizeQuality": "0.8",
                        "resizeWidth": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "width": "60"
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.SelectBox",
                    "properties": {
                        "controlField": "",
                        "id": "status",
                        "label": "Status",
                        "multiple": "",
                        "options": [
                            {
                                "grouping": "",
                                "label": "YES",
                                "value": "yes"
                            },
                            {
                                "grouping": "",
                                "label": "NO",
                                "value": "no"
                            },
                            {
                                "grouping": "",
                                "label": "N/A",
                                "value": "na"
                            }
                        ],
                        "optionsBinder": {
                            "className": "",
                            "properties": {}
                        },
                        "readonly": "",
                        "readonlyLabel": "",
                        "size": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.TextField",
                    "properties": {
                        "encryption": "",
                        "id": "remark_insp_checkpoint",
                        "label": "Remarks",
                        "maxlength": "",
                        "placeholder": "",
                        "readonly": "",
                        "readonlyLabel": "",
                        "size": "",
                        "storeNumeric": "",
                        "style": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.HiddenField",
                    "properties": {
                        "id": "referencekey",
                        "useDefaultWhenEmpty": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.plugin.enterprise.ImageUpload",
                    "properties": {
                        "createThumbnail": "true",
                        "fileType": ".jpeg;.jpg;.gif;.png",
                        "fileTypeMsg": "Invalid file type",
                        "height": "60",
                        "id": "ref_image_compliance",
                        "label": "Image Upload",
                        "maxSize": "",
                        "maxSizeMsg": "File size limit exceeded",
                        "multiple": "true",
                        "padding": "",
                        "permissionType": "",
                        "readonly": "",
                        "removeFile": "",
                        "resizeHeight": "",
                        "resizeMethod": "",
                        "resizeQuality": "0.8",
                        "resizeWidth": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "width": "60"
                    }
                }
            ],
            "properties": {"width": "100%"}
        }],
        "properties": {
            "id": "section1_1",
            "label": "Section"
        }
    }],
    "properties": {
        "description": "",
        "id": "inspectionSchedule_subform",
        "loadBinder": {
            "className": "org.joget.apps.form.lib.WorkflowFormBinder",
            "properties": {}
        },
        "name": "Inspection Schedule Subform",
        "noPermissionMessage": "",
        "permission": {
            "className": "",
            "properties": {}
        },
        "postProcessor": {
            "className": "org.joget.apps.app.lib.BeanShellTool",
            "properties": {"script": "import org.joget.apps.app.service.AppUtil;\r\nimport org.joget.apps.form.service.FormUtil;\r\nimport org.joget.apps.form.model.FormData;\r\nimport org.joget.apps.form.model.FormRow;\r\n\r\n\r\npublic void uploadimage() {\r\n\r\n         Connection con = null;\r\n         try{ \r\n             \r\n             Class.forName(\"com.mysql.jdbc.Driver\").newInstance();\r\n             con = DriverManager.getConnection(\"jdbc:mysql://localhost:3307/jwdb?characterEncoding=UTF-8\", \"root\", \"\");\r\n             if (!con.isClosed()) {\r\n\r\n// Specify the source table and column containing the values to split\r\nString sourceTable = \"app_fd_ofc_schdl_sub_tab\";\r\nString sourceColumn = \"#form.app_fd_ofc_schdl_sub_tab.c_ref_image_compliance#\";\r\nString key = \"#form.app_fd_ofc_schdl_sub_tab.id#\";\r\n\r\n// Specify the destination table and columns to store the split values\r\nString destTable = \"app_fd_ofc_upload_image_audit\";\r\nString destColumn = \"#form.app_fd_ofc_upload_image_audit.c_ref_image_history\" ;\r\nString destID = \"null\";\r\n \r\n \r\n // Get the source value\r\nFormRow sourceRow = FormUtil.getRow(sourceTable, key);\r\nString sourceValue = sourceRow.getProperty(sourceColumn);\r\n\r\n// Split the source value using a delimiter\r\nString[] values = sourceValue.split(\";\");\r\n\r\n\r\n // Create a new FormData object for the destination table\r\nFormData destData = FormUtil.getFormData(destTable, null, null, null);\r\n\r\n// Loop through the split values and create a new row for each value\r\nfor (String value : values) {\r\n    // Create a new FormRow object for the destination table\r\n    FormRow destRow = new FormRow();\r\n    \r\n    // Set the value of the destination column\r\n    destRow.setProperty(destColumn, value.trim()); // Trim to remove any whitespace\r\n    destRow.setProperty(destID,key);\r\n    \r\n    // Add the destination row to the FormData object\r\n    destData.addRow(destRow);\r\n}\r\n}\r\nelse\r\n{\r\n    \r\n                 System.out.println(\"Connection Problem\");\r\n}\r\n}\r\n\r\n            catch (Exception ex) \r\n            {\r\n             ex.printStackTrace(); \r\n             } \r\n             finally \r\n             {\r\n             try {\r\n                 con.close();\r\n                } \r\n                catch (SQLException e) {\r\n                  e.printStackTrace();\r\n             }\r\n             }\r\n             \r\n}\r\nuploadimage(); "}
        },
        "postProcessorRunOn": "both",
        "storeBinder": {
            "className": "org.joget.apps.form.lib.WorkflowFormBinder",
            "properties": {}
        },
        "tableName": "ofc_schdl_sub_tab"
    }
}